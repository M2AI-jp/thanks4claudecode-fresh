{
  "format_version": "2.1",
  "meta": {
    "id": "example",
    "branch": "feat/example",
    "created": "YYYY-MM-DD",
    "status": "draft",
    "review_profile": "standard",
    "reviewed": false,
    "reviewed_by": "",
    "roles": {
      "orchestrator": "claudecode",
      "worker": "codex",
      "reviewer": "coderabbit",
      "human": "user"
    }
  },
  "goal": {
    "summary": "Short description of the objective.",
    "done_when": [
      {
        "criterion": "Condition 1: State what must be true (not what to do)",
        "command": "test -f path/to/file.json && echo 'exists'",
        "expected": "exists"
      },
      {
        "criterion": "Condition 2: Another verifiable state",
        "command": "jq -e '.field' path/to/file.json",
        "expected": "exit 0"
      }
    ],
    "scope": {
      "includes": [],
      "excludes": []
    }
  },
  "context": {
    "analysis_result": {
      "source": "prompt-analyzer",
      "data": {}
    },
    "user_approved_understanding": {
      "source": "",
      "approved_at": "",
      "summary": "",
      "approved_items": [],
      "technical_requirements_confirmed": []
    }
  },
  "max_iterations": 5,
  "phases": [
    {
      "id": "p1",
      "name": "Phase 1",
      "description": "Describe the phase goal.",
      "depends_on": [],
      "subtasks": [
        {
          "id": "p1.1",
          "criterion": "Clear, verifiable completion condition (state, not action).",
          "executor": "claudecode",
          "coding": false,
          "validation_plan": {
            "technical": {
              "type": "automated",
              "command": "test -f path/to/file && echo 'exists'",
              "expected": "exists"
            },
            "consistency": {
              "type": "automated",
              "command": "grep -c 'pattern' related/file.md",
              "expected": ">= 1"
            },
            "completeness": {
              "type": "automated",
              "command": "jq 'keys | length' config.json",
              "expected": ">= 3"
            }
          }
        }
      ]
    },
    {
      "id": "p_final",
      "name": "Final review",
      "description": "Independent verification of done_when.",
      "depends_on": [
        "p1"
      ],
      "subtasks": [
        {
          "id": "p_final.1",
          "criterion": "All done_when conditions pass verification.",
          "executor": "coderabbit",
          "coding": false,
          "validation_plan": {
            "technical": {
              "type": "automated",
              "command": "Execute all done_when[].command and verify expected",
              "expected": "All commands return expected values"
            },
            "consistency": {
              "type": "automated",
              "command": "Compare plan.json done_when with actual state",
              "expected": "100% match"
            },
            "completeness": {
              "type": "manual",
              "command": "Review all done_when items manually",
              "expected": "Human confirmation that all criteria are met"
            }
          }
        }
      ]
    }
  ],
  "final_tasks": []
}
