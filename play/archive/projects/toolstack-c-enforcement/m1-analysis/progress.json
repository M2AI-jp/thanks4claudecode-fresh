{
  "format_version": "2.0",
  "playbook": {
    "id": "m1-analysis",
    "plan_path": "play/projects/toolstack-c-enforcement/playbooks/m1-analysis/plan.json",
    "status": "active"
  },
  "active": {
    "phase": "p_final",
    "subtask": "p_final.1"
  },
  "phases": {
    "p1": {
      "status": "done",
      "updated_at": "2026-01-20T04:00:00+09:00"
    },
    "p2": {
      "status": "done",
      "updated_at": "2026-01-20T04:05:00+09:00"
    },
    "p3": {
      "status": "done",
      "updated_at": "2026-01-20T04:12:00+09:00"
    },
    "p4": {
      "status": "done",
      "updated_at": "2026-01-20T04:15:00+09:00"
    },
    "p_final": {
      "status": "done",
      "updated_at": "2026-01-20T04:20:00+09:00"
    }
  },
  "subtasks": {
    "p1.1": {
      "status": "done",
      "validated_at": "2026-01-20T03:58:00+09:00",
      "validated_by": "critic",
      "validations": {
        "technical": {
          "status": "PASS",
          "evidence": ["grep -rh executor + sort|uniq -c: claudecode:76, reviewer:17, codex:10, coderabbit:0"]
        },
        "consistency": {
          "status": "PASS",
          "evidence": ["事前分析との差異は1件のみ、傾向一致（coderabbit:0が核心）"]
        },
        "completeness": {
          "status": "PASS",
          "evidence": ["find で 18件の plan.json を確認、全てスキャン対象"]
        }
      },
      "notes": "coderabbit: 0件を証拠で確認"
    },
    "p1.2": {
      "status": "done",
      "validated_at": "2026-01-20T04:00:00+09:00",
      "validated_by": "critic",
      "validations": {
        "technical": {
          "status": "PASS",
          "evidence": ["grep -rn で reviewer 17件を行番号付き列挙（全て p_final.1）"]
        },
        "consistency": {
          "status": "PASS",
          "evidence": ["coderabbit 0件を確認（grep 出力なし）"]
        },
        "completeness": {
          "status": "PASS",
          "evidence": ["play/archive/ 配下 18 plan.json を全スキャン"]
        }
      },
      "notes": "reviewer は playbook 最終検証用、coderabbit（コードレビュー CLI）は未使用"
    },
    "p2.1": {
      "status": "done",
      "validated_at": "2026-01-20T04:02:00+09:00",
      "validated_by": "critic",
      "validations": {
        "technical": {
          "status": "PASS",
          "evidence": [".claude/skills/playbook-gate/guards/role-resolver.sh が存在（5135 bytes）"]
        },
        "consistency": {
          "status": "PASS",
          "evidence": ["toolstack C で reviewer→coderabbit に解決、state.md の roles と整合"]
        },
        "completeness": {
          "status": "PASS",
          "evidence": [".claude/hooks/, .claude/skills/playbook-gate/guards/ を全スキャン"]
        }
      },
      "notes": "根本原因: executor-guard.sh はコードファイル編集時のみ発火、reviewer(p_final)はコード編集しないため発火しない"
    },
    "p2.2": {
      "status": "done",
      "validated_at": "2026-01-20T04:05:00+09:00",
      "validated_by": "critic",
      "validations": {
        "technical": {
          "status": "PASS",
          "evidence": ["executor-resolver は coderabbit を出力するよう定義"]
        },
        "consistency": {
          "status": "PASS",
          "evidence": ["plan.json テンプレートは reviewer を使用 - 設計上の不整合を発見"]
        },
        "completeness": {
          "status": "PASS",
          "evidence": ["reviewer→coderabbit 変換ルールが文書化されていないことを確認"]
        }
      },
      "notes": "根本原因発見: executor-resolver=coderabbit出力、テンプレート=reviewer使用、変換ルール未文書化"
    },
    "p3.1": {
      "status": "done",
      "validated_at": "2026-01-20T04:10:00+09:00",
      "validated_by": "critic",
      "validations": {
        "technical": {
          "status": "PASS",
          "evidence": ["archive-playbook.sh Step 5: 正常なアーカイブロジック確認"]
        },
        "consistency": {
          "status": "PASS",
          "evidence": ["git c8ddd96: R100(正常移動), git 9b57078: D(削除)"]
        },
        "completeness": {
          "status": "PASS",
          "evidence": ["archive-project.sh 117-119行: rm -rf でバグ発見"]
        }
      },
      "notes": "根本原因: archive-project.sh が既存archiveを削除してからprojectを移動、既アーカイブplaybooks消失"
    },
    "p3.2": {
      "status": "done",
      "validated_at": "2026-01-20T04:12:00+09:00",
      "validated_by": "critic",
      "validations": {
        "technical": {
          "status": "PASS",
          "evidence": ["ls -la: playbooks/ が空（total 0）"]
        },
        "consistency": {
          "status": "PASS",
          "evidence": ["project.json に 3 playbook 定義あり、実体は消失"]
        },
        "completeness": {
          "status": "PASS",
          "evidence": ["design-validation も playbooks/ なし（同様の問題）"]
        }
      },
      "notes": "原因: archive-project.sh 117-119行の rm -rf で既存archive削除"
    },
    "p4.1": {
      "status": "done",
      "validated_at": "2026-01-20T04:15:00+09:00",
      "validated_by": "critic",
      "validations": {
        "technical": {
          "status": "PASS",
          "evidence": ["test -f: tmp/executor-usage-report.md 存在確認（3.9KB, 157行）"]
        },
        "consistency": {
          "status": "PASS",
          "evidence": ["p1-p3 の 6 subtask 証拠が全てレポートに含まれている"]
        },
        "completeness": {
          "status": "PASS",
          "evidence": ["3 仮説 + 優先度付き M2 引き継ぎ事項（高2, 中2）"]
        }
      },
      "notes": "レポート完成: 統計・分析結果・根本原因仮説・M2引き継ぎ事項を記載"
    },
    "p_final.1": {
      "status": "done",
      "validated_at": "2026-01-20T04:20:00+09:00",
      "validated_by": "critic",
      "validations": {
        "technical": {
          "status": "PASS",
          "evidence": ["test -f: tmp/executor-usage-report.md EXISTS (157 lines, 4982 bytes)"]
        },
        "consistency": {
          "status": "PASS",
          "evidence": ["done_when 4項目がレポートSection 2-4と一致"]
        },
        "completeness": {
          "status": "PASS",
          "evidence": ["reviewer PASS + critic 独立検証で全4項目確認済み"]
        }
      },
      "notes": "reviewer + critic dual validation 完了"
    }
  },
  "final_tasks": [],
  "critic": {
    "status": "PENDING",
    "evidence": [],
    "notes": ""
  }
}
