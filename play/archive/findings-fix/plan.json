{
  "format_version": "2.2",
  "meta": {
    "id": "findings-fix",
    "branch": "feat/findings-fix",
    "created": "2026-01-28",
    "status": "active",
    "review_profile": "standard",
    "reviewed": true,
    "reviewed_by": "reviewer",
    "roles": {
      "orchestrator": "claudecode",
      "worker": "claudecode",
      "reviewer": "coderabbit",
      "human": "user"
    }
  },
  "goal": {
    "summary": "mece-completion playbook 完了後の残存 Findings を修正する",
    "done_when": [
      {
        "criterion": ".claude/.session-init/ に pending, required_playbook, repository-map.prev.yaml が存在しない",
        "command": "ls .claude/.session-init/ | grep -cE '(pending|required_playbook|repository-map.prev.yaml)'",
        "expected": "0"
      },
      {
        "criterion": "play/archive/mece-completion/plan.json の meta.status が archived である",
        "command": "jq -r '.meta.status' play/archive/mece-completion/plan.json",
        "expected": "archived"
      }
    ],
    "scope": {
      "includes": [
        ".claude/.session-init/ の不要ファイル削除（pending, required_playbook, repository-map.prev.yaml）",
        "play/archive/mece-completion/plan.json の meta.status 修正"
      ],
      "excludes": [
        "新機能の実装",
        "他のファイルの変更"
      ]
    }
  },
  "context": {
    "analysis_result": {
      "source": "prompt-analyzer",
      "data": {
        "topic_type": "instruction",
        "confidence": "high",
        "ready_for_playbook": true,
        "5w1h": {
          "what": "mece-completion Findings 修正",
          "why": "playbook 完了後の残存ファイル/設定のクリーンアップ",
          "who": "pm SubAgent",
          "when": "即時",
          "where": ".claude/.session-init/, play/archive/mece-completion/",
          "how": "ファイル削除と JSON 値修正"
        }
      }
    },
    "user_approved_understanding": {
      "source": "AUTO_APPROVED",
      "approved_at": "2026-01-28",
      "summary": "分析結果に基づく 3 ファイル削除と 1 ファイル修正",
      "approved_items": [
        ".claude/.session-init/pending 削除",
        ".claude/.session-init/required_playbook 削除",
        ".claude/.session-init/repository-map.prev.yaml 削除",
        "play/archive/mece-completion/plan.json の meta.status を archived に変更"
      ],
      "technical_requirements_confirmed": []
    }
  },
  "max_iterations": 5,
  "phases": [
    {
      "id": "p1",
      "name": "不要ファイル削除",
      "description": ".claude/.session-init/ 内の 3 ファイルを削除する",
      "depends_on": [],
      "subtasks": [
        {
          "id": "p1.1",
          "criterion": ".claude/.session-init/pending が存在しない",
          "executor": "claudecode",
          "coding": false,
          "validation_plan": {
            "technical": {
              "type": "automated",
              "command": "test ! -f .claude/.session-init/pending && echo 'deleted'",
              "expected": "deleted"
            },
            "consistency": {
              "type": "automated",
              "command": "ls .claude/.session-init/ | wc -l | tr -d ' '",
              "expected": "<= 3"
            },
            "completeness": {
              "type": "automated",
              "command": "ls .claude/.session-init/ | grep -v -E '(architecture-sync|repository-map.prev)' | wc -l | tr -d ' '",
              "expected": "<= 2"
            }
          }
        },
        {
          "id": "p1.2",
          "criterion": ".claude/.session-init/required_playbook が存在しない",
          "executor": "claudecode",
          "coding": false,
          "validation_plan": {
            "technical": {
              "type": "automated",
              "command": "test ! -f .claude/.session-init/required_playbook && echo 'deleted'",
              "expected": "deleted"
            },
            "consistency": {
              "type": "automated",
              "command": "ls .claude/.session-init/ | wc -l | tr -d ' '",
              "expected": "<= 2"
            },
            "completeness": {
              "type": "automated",
              "command": "grep -r 'required_playbook' .claude/ 2>/dev/null | wc -l | tr -d ' '",
              "expected": "0"
            }
          }
        },
        {
          "id": "p1.3",
          "criterion": ".claude/.session-init/repository-map.prev.yaml が存在しない",
          "executor": "claudecode",
          "coding": false,
          "validation_plan": {
            "technical": {
              "type": "automated",
              "command": "test ! -f .claude/.session-init/repository-map.prev.yaml && echo 'deleted'",
              "expected": "deleted"
            },
            "consistency": {
              "type": "automated",
              "command": "ls .claude/.session-init/ | wc -l | tr -d ' '",
              "expected": "<= 1"
            },
            "completeness": {
              "type": "automated",
              "command": "test -f .claude/.session-init/architecture-sync.yaml && echo 'kept'",
              "expected": "kept"
            }
          }
        }
      ]
    },
    {
      "id": "p2",
      "name": "archive plan.json 修正",
      "description": "play/archive/mece-completion/plan.json の meta.status を archived に変更",
      "depends_on": ["p1"],
      "subtasks": [
        {
          "id": "p2.1",
          "criterion": "play/archive/mece-completion/plan.json の meta.status が archived である",
          "executor": "claudecode",
          "coding": false,
          "validation_plan": {
            "technical": {
              "type": "automated",
              "command": "jq -r '.meta.status' play/archive/mece-completion/plan.json",
              "expected": "archived"
            },
            "consistency": {
              "type": "automated",
              "command": "test -d play/archive/mece-completion && echo 'in_archive'",
              "expected": "in_archive"
            },
            "completeness": {
              "type": "automated",
              "command": "jq -r '.meta.reviewed' play/archive/mece-completion/plan.json",
              "expected": "true"
            }
          }
        }
      ]
    },
    {
      "id": "p_final",
      "name": "最終検証",
      "description": "goal.done_when の全条件が満たされていることを確認",
      "depends_on": ["p2"],
      "subtasks": [
        {
          "id": "p_final.1",
          "criterion": "goal.done_when の全コマンドが expected を返す",
          "executor": "coderabbit",
          "coding": false,
          "validation_plan": {
            "technical": {
              "type": "automated",
              "command": "ls .claude/.session-init/ | grep -cE '(pending|required_playbook|repository-map.prev.yaml)' || echo '0'",
              "expected": "0"
            },
            "consistency": {
              "type": "automated",
              "command": "jq -r '.meta.status' play/archive/mece-completion/plan.json",
              "expected": "archived"
            },
            "completeness": {
              "type": "automated",
              "command": "ls .claude/.session-init/ && jq '.meta.status' play/archive/mece-completion/plan.json",
              "expected": "architecture-sync.yaml\n\"archived\""
            }
          }
        }
      ]
    }
  ],
  "final_tasks": []
}
