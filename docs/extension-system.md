# Claude Code æ‹¡å¼µã‚·ã‚¹ãƒ†ãƒ ä½“ç³»

> **å…¬å¼ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã«åŸºã¥ãç™ºç«ã‚¿ã‚¤ãƒŸãƒ³ã‚°ãƒ»ãƒˆãƒªã‚¬ãƒ¼ãƒ»é€£æºã®å®Œå…¨ã‚¬ã‚¤ãƒ‰**
>
> Sources:
> - https://code.claude.com/docs/ja/hooks
> - https://code.claude.com/docs/ja/plugins-reference

---

## æ¦‚è¦: 4ã¤ã®æ‹¡å¼µãƒ¡ã‚«ãƒ‹ã‚ºãƒ 

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Claude Code æ‹¡å¼µã‚·ã‚¹ãƒ†ãƒ                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚    Hooks     â”‚  â”‚  SubAgents   â”‚  â”‚    Skills    â”‚  â”‚   Commands   â”‚ â”‚
â”‚  â”‚  ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•  â”‚  â”‚   å§”è­²å‹     â”‚  â”‚  è‡ªå‹•ç™ºè¦‹å‹   â”‚  â”‚  æ˜ç¤ºå‘¼å‡ºå‹   â”‚ â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚ â”‚
â”‚  â”‚ PreToolUse   â”‚  â”‚ Task ãƒ„ãƒ¼ãƒ«  â”‚  â”‚ èª¬æ˜ãƒ™ãƒ¼ã‚¹   â”‚  â”‚ /command     â”‚ â”‚
â”‚  â”‚ PostToolUse  â”‚  â”‚ ã§å§”è­²       â”‚  â”‚ è‡ªå‹•èµ·å‹•     â”‚  â”‚ ã§èµ·å‹•       â”‚ â”‚
â”‚  â”‚ SessionStart â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚ â”‚
â”‚  â”‚ ãªã©         â”‚  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                          â”‚
â”‚  ç™ºç«: è‡ªå‹•         ç™ºç«: è‡ªå‹•/æ‰‹å‹•    ç™ºç«: è‡ªå‹•         ç™ºç«: æ‰‹å‹•      â”‚
â”‚  åˆ¶å¾¡: ãƒ–ãƒ­ãƒƒã‚¯å¯   åˆ¶å¾¡: ç‹¬ç«‹å®Ÿè¡Œ     åˆ¶å¾¡: ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ  åˆ¶å¾¡: ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 1. Hooksï¼ˆã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•å‹ï¼‰

### 1.1 åˆ©ç”¨å¯èƒ½ãª Hook ã‚¤ãƒ™ãƒ³ãƒˆï¼ˆ10ç¨®é¡ï¼‰

| ã‚¤ãƒ™ãƒ³ãƒˆ | ç™ºç«ã‚¿ã‚¤ãƒŸãƒ³ã‚° | matcher | ä¸»ãªç”¨é€” |
|---------|--------------|---------|---------|
| **PreToolUse** | ãƒ„ãƒ¼ãƒ«å®Ÿè¡Œå‰ï¼ˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ä½œæˆå¾Œï¼‰ | â—‹ | æ¨©é™åˆ¶å¾¡ã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å¤‰æ›´ã€ãƒ–ãƒ­ãƒƒã‚¯ |
| **PostToolUse** | ãƒ„ãƒ¼ãƒ«å®Ÿè¡ŒæˆåŠŸå¾Œ | â—‹ | çµæœæ¤œè¨¼ã€è¿½åŠ ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆæ³¨å…¥ |
| **PermissionRequest** | æ¨©é™ãƒ€ã‚¤ã‚¢ãƒ­ã‚°è¡¨ç¤ºæ™‚ | â—‹ | æ¨©é™åˆ¤å®šã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º |
| **UserPromptSubmit** | ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆé€ä¿¡æ™‚ | - | å…¥åŠ›æ¤œè¨¼ã€ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆè¿½åŠ  |
| **Stop** | ãƒ¡ã‚¤ãƒ³ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆåœæ­¢è©¦è¡Œæ™‚ | - | ç¶™ç¶šåˆ¤å®šã€è¿½åŠ ã‚¿ã‚¹ã‚¯æŒ‡ç¤º |
| **SubagentStop** | ã‚µãƒ–ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆåœæ­¢è©¦è¡Œæ™‚ | - | ã‚µãƒ–ã‚¿ã‚¹ã‚¯è©•ä¾¡ã€ç¶™ç¶šåˆ¤å®š |
| **SessionStart** | ã‚»ãƒƒã‚·ãƒ§ãƒ³é–‹å§‹/å†é–‹æ™‚ | - | ç’°å¢ƒåˆæœŸåŒ–ã€å¤‰æ•°è¨­å®š |
| **SessionEnd** | ã‚»ãƒƒã‚·ãƒ§ãƒ³çµ‚äº†æ™‚ | - | ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã€ãƒ­ã‚°è¨˜éŒ² |
| **PreCompact** | ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆåœ§ç¸®å‰ | - | é‡è¦æƒ…å ±ã®ä¿æŒæŒ‡ç¤º |
| **Notification** | é€šçŸ¥é€ä¿¡æ™‚ | - | é€šçŸ¥ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º |

### 1.2 Hook ã‚¿ã‚¤ãƒ—ï¼ˆ3ç¨®é¡ï¼‰

```yaml
command:      # ã‚·ã‚§ãƒ«ã‚³ãƒãƒ³ãƒ‰ã¾ãŸã¯ã‚¹ã‚¯ãƒªãƒ—ãƒˆå®Ÿè¡Œï¼ˆæœ€ã‚‚ä¸€èˆ¬çš„ï¼‰
validation:   # ãƒ•ã‚¡ã‚¤ãƒ«ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¾ãŸã¯ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆçŠ¶æ…‹æ¤œè¨¼
notification: # ã‚¢ãƒ©ãƒ¼ãƒˆã€ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹æ›´æ–°é€ä¿¡
```

### 1.3 matcher ã®ä»•æ§˜

```yaml
å¯¾è±¡: PreToolUse, PostToolUse, PermissionRequest ã®ã¿

ãƒ‘ã‚¿ãƒ¼ãƒ³:
  å®Œå…¨ä¸€è‡´: "Write"           # Write ãƒ„ãƒ¼ãƒ«ã®ã¿
  æ­£è¦è¡¨ç¾: "Edit|Write"      # Edit ã¾ãŸã¯ Write
  ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰: "*" ã¾ãŸã¯ "" # å…¨ãƒ„ãƒ¼ãƒ«
  å¤–éƒ¨ãƒ„ãƒ¼ãƒ«: "mcp__server__tool"    # å¤–éƒ¨ãƒ„ãƒ¼ãƒ«æŒ‡å®š
```

### 1.4 å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ï¼ˆstdin JSONï¼‰

```yaml
å…±é€šãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰:
  session_id: ã‚»ãƒƒã‚·ãƒ§ãƒ³è­˜åˆ¥å­
  transcript_path: ä¼šè©±ãƒ­ã‚°ãƒ‘ã‚¹
  cwd: ç¾åœ¨ã®ä½œæ¥­ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
  permission_mode: default|plan|acceptEdits|bypassPermissions
  hook_event_name: ã‚¤ãƒ™ãƒ³ãƒˆå

ã‚¤ãƒ™ãƒ³ãƒˆå›ºæœ‰:
  PreToolUse: tool_name, tool_input, tool_use_id
  PostToolUse: tool_name, tool_input, tool_response
  UserPromptSubmit: prompt
  Stop/SubagentStop: stop_hook_active (boolean)
  SessionStart: source (startup|resume|clear|compact)
```

### 1.5 ç’°å¢ƒå¤‰æ•°

| å¤‰æ•° | èª¬æ˜ | åˆ©ç”¨å¯èƒ½æ™‚ |
|-----|------|----------|
| `CLAUDE_PROJECT_DIR` | ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆçµ¶å¯¾ãƒ‘ã‚¹ | å…¨ Hook |
| `CLAUDE_CODE_REMOTE` | ãƒªãƒ¢ãƒ¼ãƒˆç’°å¢ƒãƒ•ãƒ©ã‚°ï¼ˆ"true"ï¼‰ | å…¨ Hook |
| `CLAUDE_ENV_FILE` | ç’°å¢ƒå¤‰æ•°æ°¸ç¶šåŒ–ãƒ•ã‚¡ã‚¤ãƒ« | SessionStart ã®ã¿ |
| `${CLAUDE_PLUGIN_ROOT}` | ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªçµ¶å¯¾ãƒ‘ã‚¹ | ãƒ—ãƒ©ã‚°ã‚¤ãƒ³å†… Hook |

### 1.6 å‡ºåŠ›ã¨åŠ¹æœ

```yaml
çµ‚äº†ã‚³ãƒ¼ãƒ‰:
  0: æˆåŠŸï¼ˆstdout ãŒã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã«è¿½åŠ ã•ã‚Œã‚‹å ´åˆã‚ã‚Šï¼‰
  2: ãƒ–ãƒ­ãƒƒã‚¯ï¼ˆstderr ãŒã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼‰
  ãã®ä»–: è­¦å‘Šè¡¨ç¤ºã€å®Ÿè¡Œç¶™ç¶š

JSON å‡ºåŠ›ï¼ˆçµ‚äº†ã‚³ãƒ¼ãƒ‰ 0 æ™‚ã®ã¿å‡¦ç†ï¼‰:
  å…±é€š:
    continue: false ã§ Claude åœæ­¢
    stopReason: åœæ­¢ç†ç”±
    systemMessage: ãƒ¦ãƒ¼ã‚¶ãƒ¼å‘ã‘è­¦å‘Š

  PreToolUse å°‚ç”¨:
    hookSpecificOutput:
      permissionDecision: allow|deny|ask
      permissionDecisionReason: èª¬æ˜
      updatedInput: { ä¿®æ­£ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ }

  UserPromptSubmit/Stop å°‚ç”¨:
    decision: block
    reason: ãƒ–ãƒ­ãƒƒã‚¯ç†ç”±

  PostToolUse å°‚ç”¨:
    hookSpecificOutput:
      additionalContext: è¿½åŠ æƒ…å ±
```

### 1.7 é€£æºãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆä¸€èˆ¬ï¼‰

```
SessionStart â†’ [ç’°å¢ƒåˆæœŸåŒ–]
     â†“
UserPromptSubmit â†’ [å…¥åŠ›æ¤œè¨¼]
     â†“
PreToolUse â†’ [æ¨©é™/ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åˆ¶å¾¡]
     â†“
[ãƒ„ãƒ¼ãƒ«å®Ÿè¡Œ]
     â†“
PostToolUse â†’ [çµæœæ¤œè¨¼/ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆè¿½åŠ ]
     â†“
Stop/SubagentStop â†’ [ç¶™ç¶šåˆ¤å®š]
     â†“
SessionEnd â†’ [ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—]
```

> **ğŸ“Œ è©³ç´°ãªãƒˆãƒªã‚¬ãƒ¼ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ã¯ `docs/repository-map.yaml` ã® `hook_trigger_sequence` ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’å‚ç…§**

---

### 1.8 Hook é€£é–é–¢ä¿‚ï¼ˆæœ¬ãƒªãƒã‚¸ãƒˆãƒªå›ºæœ‰ï¼‰

> **ã“ã®ãƒªãƒã‚¸ãƒˆãƒªã® settings.json ã«åŸºã¥ãå…·ä½“çš„ãª Hook é€£é–**

#### ã‚»ãƒƒã‚·ãƒ§ãƒ³é–‹å§‹ãƒ•ãƒ­ãƒ¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SessionStart                                                     â”‚
â”‚ â””â”€â”€ session-start.sh                                            â”‚
â”‚     â”œâ”€â”€ pending ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ (.claude/.session-init/pending)    â”‚
â”‚     â”œâ”€â”€ consent ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆ (.claude/.session-init/consent)    â”‚
â”‚     â”œâ”€â”€ éå»ã®å¤±æ•—ãƒ‘ã‚¿ãƒ¼ãƒ³è¡¨ç¤º                                  â”‚
â”‚     â””â”€â”€ [è‡ªèª] å‡ºåŠ›è¦æ±‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ UserPromptSubmit                                                â”‚
â”‚ â””â”€â”€ prompt-guard.sh                                             â”‚
â”‚     â””â”€â”€ å¿…é ˆèª­ã¿è¾¼ã¿æ¡ˆå†…ï¼ˆstate.md, project.md, playbookï¼‰     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Edit/Write ãƒ•ãƒ­ãƒ¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PreToolUse:* (å…¨ãƒ„ãƒ¼ãƒ«å…±é€š)                                     â”‚
â”‚ â”œâ”€â”€ init-guard.sh    â†’ pending å­˜åœ¨æ™‚ãƒ–ãƒ­ãƒƒã‚¯ï¼ˆRead æœªå®Œäº†ï¼‰   â”‚
â”‚ â””â”€â”€ check-main-branch.sh â†’ main ãƒ–ãƒ©ãƒ³ãƒæ™‚ãƒ–ãƒ­ãƒƒã‚¯             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PreToolUse:Edit/Write (Edit/Write å›ºæœ‰)                         â”‚
â”‚ â”œâ”€â”€ consent-guard.sh â†’ consent ãƒ•ã‚¡ã‚¤ãƒ«å­˜åœ¨æ™‚ãƒ–ãƒ­ãƒƒã‚¯          â”‚
â”‚ â”‚   â””â”€â”€ [ç†è§£ç¢ºèª] å‡ºåŠ› â†’ ãƒ¦ãƒ¼ã‚¶ãƒ¼ OK â†’ rm consent â†’ é€šé     â”‚
â”‚ â”œâ”€â”€ check-protected-edit.sh â†’ ä¿è­·ãƒ•ã‚¡ã‚¤ãƒ«ç·¨é›†ãƒ–ãƒ­ãƒƒã‚¯         â”‚
â”‚ â”œâ”€â”€ playbook-guard.sh â†’ playbook=null æ™‚ãƒ–ãƒ­ãƒƒã‚¯               â”‚
â”‚ â”œâ”€â”€ depends-check.sh â†’ Phase ä¾å­˜é–¢ä¿‚ãƒã‚§ãƒƒã‚¯                  â”‚
â”‚ â”œâ”€â”€ check-file-dependencies.sh â†’ ãƒ•ã‚¡ã‚¤ãƒ«ä¾å­˜é–¢ä¿‚ãƒã‚§ãƒƒã‚¯      â”‚
â”‚ â”œâ”€â”€ critic-guard.sh â†’ done å¤‰æ›´æ™‚ critic å¿…é ˆ                  â”‚
â”‚ â”œâ”€â”€ scope-guard.sh â†’ done_criteria ç„¡æ–­å¤‰æ›´æ¤œå‡º                â”‚
â”‚ â””â”€â”€ executor-guard.sh â†’ executor å¼·åˆ¶                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
                        [Edit/Write å®Ÿè¡Œ]
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PostToolUse:Edit                                                â”‚
â”‚ â”œâ”€â”€ archive-playbook.sh â†’ playbook å®Œäº†æ™‚ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ææ¡ˆ        â”‚
â”‚ â”œâ”€â”€ cleanup-hook.sh â†’ tmp/ è‡ªå‹•ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—                  â”‚
â”‚ â”œâ”€â”€ create-pr-hook.sh â†’ PR è‡ªå‹•ä½œæˆ                            â”‚
â”‚ â””â”€â”€ update-tracker.sh â†’ å¤‰æ›´è¿½è·¡ãƒ»è‡ªå‹•æ›´æ–°ææ¡ˆ                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Bash ãƒ•ãƒ­ãƒ¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PreToolUse:Bash                                                 â”‚
â”‚ â”œâ”€â”€ pre-bash-check.sh â†’ å±é™ºã‚³ãƒãƒ³ãƒ‰ãƒã‚§ãƒƒã‚¯                   â”‚
â”‚ â”œâ”€â”€ check-coherence.sh â†’ state.md/playbook æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯      â”‚
â”‚ â””â”€â”€ lint-check.sh â†’ ESLint/ShellCheck/Ruff å®Ÿè¡Œ               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### SubAgent ãƒ•ãƒ­ãƒ¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PostToolUse:Task                                                â”‚
â”‚ â””â”€â”€ log-subagent.sh                                             â”‚
â”‚     â”œâ”€â”€ SubAgent ç™ºå‹•ãƒ­ã‚°è¨˜éŒ²                                   â”‚
â”‚     â””â”€â”€ critic çµæœå‡¦ç†ï¼ˆPASS/FAILï¼‰                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆèª­ã¿è¾¼ã¿ãƒ•ãƒ­ãƒ¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PostToolUse:Read                                                â”‚
â”‚ â””â”€â”€ doc-freshness-check.sh â†’ ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆé®®åº¦ãƒã‚§ãƒƒã‚¯          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ã‚»ãƒƒã‚·ãƒ§ãƒ³çµ‚äº†ãƒ•ãƒ­ãƒ¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Stop                                                            â”‚
â”‚ â””â”€â”€ stop-summary.sh â†’ Phase çŠ¶æ…‹ã‚µãƒãƒªãƒ¼ + æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SessionEnd                                                      â”‚
â”‚ â””â”€â”€ session-end.sh â†’ å››ã¤çµ„æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯ + ãƒªãƒã‚¤ãƒ³ãƒ‰         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆåœ§ç¸®ãƒ•ãƒ­ãƒ¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PreCompact                                                      â”‚
â”‚ â””â”€â”€ pre-compact.sh â†’ å®Œå…¨ãªçŠ¶æ…‹ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆä¿å­˜            â”‚
â”‚     â””â”€â”€ .claude/.session-init/user-intents.md ã«ä¿å­˜           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ï¼ˆHook éç™»éŒ²ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Utility Scripts (æ‰‹å‹•å®Ÿè¡Œ or ä»– Hook ã‹ã‚‰å‘¼ã³å‡ºã—)              â”‚
â”‚ â”œâ”€â”€ create-pr.sh â†’ PR ä½œæˆã‚¹ã‚¯ãƒªãƒ—ãƒˆ                           â”‚
â”‚ â”œâ”€â”€ merge-pr.sh â†’ PR ãƒãƒ¼ã‚¸ã‚¹ã‚¯ãƒªãƒ—ãƒˆ                          â”‚
â”‚ â”œâ”€â”€ failure-logger.sh â†’ å¤±æ•—ãƒ‘ã‚¿ãƒ¼ãƒ³è¨˜éŒ²                       â”‚
â”‚ â”œâ”€â”€ generate-repository-map.sh â†’ repository-map.yaml ç”Ÿæˆ      â”‚
â”‚ â”œâ”€â”€ system-health-check.sh â†’ ã‚·ã‚¹ãƒ†ãƒ å¥å…¨æ€§ãƒã‚§ãƒƒã‚¯            â”‚
â”‚ â””â”€â”€ test-hooks.sh â†’ Hook æ©Ÿèƒ½ã‚«ã‚¿ãƒ­ã‚°ã‚¹ãƒšãƒƒã‚¯æ¤œè¨¼              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. SubAgentsï¼ˆå§”è­²å‹ï¼‰

### 2.1 å®šç¾©å½¢å¼

```yaml
# .claude/agents/agent-name.md

---
name: agent-identifier        # å¿…é ˆ: å°æ–‡å­—ãƒ»ãƒã‚¤ãƒ•ãƒ³
description: æ©Ÿèƒ½ã¨ä½¿ç”¨æ™‚æ©Ÿ    # å¿…é ˆ: è‡ªå‹•å§”è­²ã®ãƒˆãƒªã‚¬ãƒ¼
tools: Read, Grep, Glob       # ä»»æ„: çœç•¥ã§å…¨ãƒ„ãƒ¼ãƒ«ç¶™æ‰¿
model: sonnet                 # ä»»æ„: sonnet|opus|haiku|inherit
permissionMode: default       # ä»»æ„: default|acceptEdits|bypassPermissions|plan|ignore
skills: skill1, skill2        # ä»»æ„: è‡ªå‹•ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã‚¹ã‚­ãƒ«
capabilities:                 # ä»»æ„: å¾—æ„ãªã‚¿ã‚¹ã‚¯ã®ãƒªã‚¹ãƒˆï¼ˆãƒ—ãƒ©ã‚°ã‚¤ãƒ³ç”¨ï¼‰
  - task1
  - task2
---

ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆï¼ˆè©³ç´°ãªæŒ‡ç¤ºï¼‰
```

### 2.2 ç™ºç«ãƒˆãƒªã‚¬ãƒ¼

```yaml
è‡ªå‹•å§”è­²:
  - description ã«ã€ŒPROACTIVELYã€ã€ŒAUTOMATICALLYã€ã‚’å«ã‚ã‚‹
  - Claude ãŒã‚¿ã‚¹ã‚¯å†…å®¹ã¨ description ã‚’ç…§åˆã—ã¦åˆ¤æ–­

æ‰‹å‹•å‘¼ã³å‡ºã—:
  - ãƒ¦ãƒ¼ã‚¶ãƒ¼: "Use the critic subagent to review this"
  - Task ãƒ„ãƒ¼ãƒ«: Task(subagent_type='critic', prompt='...')

CLI å®šç¾©:
  claude --agents '{"name": {...}}'
```

### 2.3 ãƒ“ãƒ«ãƒˆã‚¤ãƒ³ SubAgent

| åå‰ | ç”¨é€” | ãƒ¢ãƒ‡ãƒ« | ãƒ„ãƒ¼ãƒ«åˆ¶é™ |
|-----|------|-------|----------|
| general-purpose | è¤‡é›‘ãªå¤šæ®µéšã‚¿ã‚¹ã‚¯ | Sonnet | å…¨ãƒ„ãƒ¼ãƒ« |
| Explore | èª­ã¿å–ã‚Šå°‚ç”¨æ¤œç´¢ | Haiku | Read, Grep, Glob |
| Plan | è¨ˆç”»ãƒ¢ãƒ¼ãƒ‰ | Sonnet | Read, Grep, Glob, Bash |

### 2.4 ç‰¹å¾´

- ç‹¬ç«‹ã—ãŸã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚¦ã‚£ãƒ³ãƒ‰ã‚¦
- ãƒ„ãƒ¼ãƒ«/æ¨©é™ã®åˆ¶é™å¯èƒ½
- å†é–‹æ©Ÿèƒ½ï¼ˆagentId æŒ‡å®šï¼‰
- ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒã‚§ãƒ¼ãƒ³ï¼ˆè¤‡æ•° SubAgent ã®é€£æºï¼‰

---

## 3. Skillsï¼ˆè‡ªå‹•ç™ºè¦‹å‹ï¼‰

### 3.1 å®šç¾©å½¢å¼

```yaml
# .claude/skills/skill-name/SKILL.md

---
name: skill-identifier        # å¿…é ˆ: å°æ–‡å­—ãƒ»æ•°å­—ãƒ»ãƒã‚¤ãƒ•ãƒ³ï¼ˆæœ€å¤§64æ–‡å­—ï¼‰
description: æ©Ÿèƒ½ã¨ä½¿ç”¨æ™‚æ©Ÿ    # å¿…é ˆ: è‡ªå‹•ç™ºè¦‹ã®ã‚­ãƒ¼ï¼ˆæœ€å¤§1024æ–‡å­—ï¼‰
---

ã‚¹ã‚­ãƒ«ã®è©³ç´°èª¬æ˜ã¨æŒ‡ç¤º
```

### 3.2 è£œè¶³ãƒ•ã‚¡ã‚¤ãƒ«

```
.claude/skills/skill-name/
â”œâ”€â”€ SKILL.md           # å¿…é ˆ
â”œâ”€â”€ reference.md       # ä»»æ„: å‚è€ƒè³‡æ–™
â”œâ”€â”€ examples.md        # ä»»æ„: ä½¿ç”¨ä¾‹
â”œâ”€â”€ scripts/           # ä»»æ„: æ¤œè¨¼ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â””â”€â”€ templates/         # ä»»æ„: ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
```

### 3.3 ç™ºç«ãƒˆãƒªã‚¬ãƒ¼

```yaml
ãƒˆãƒªã‚¬ãƒ¼: ãƒ¢ãƒ‡ãƒ«å‘¼ã³å‡ºã—ï¼ˆModel-Invokedï¼‰

åˆ¤æ–­åŸºæº–:
  - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®å†…å®¹
  - Skill ã® description ã¨ã®ç…§åˆ
  - ç¾åœ¨ã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ

åŠ¹æœçš„ãª description ä¾‹:
  "PDF ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ†ã‚­ã‚¹ãƒˆã¨è¡¨ã‚’æŠ½å‡ºã€ãƒ•ã‚©ãƒ¼ãƒ ã‚’è¨˜å…¥ã€‚
   PDF ã‚„ãƒ•ã‚©ãƒ¼ãƒ ã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæŠ½å‡ºã«ã¤ã„ã¦è¨€åŠã•ã‚Œã‚‹å ´åˆã«ä½¿ç”¨"

NG ä¾‹:
  "PDF ã‚’å‡¦ç†ã—ã¾ã™"  # æ›–æ˜§ã™ãã¦ç™ºè¦‹ã•ã‚Œã«ãã„
```

---

## 4. Slash Commandsï¼ˆæ˜ç¤ºå‘¼å‡ºå‹ï¼‰

### 4.1 å®šç¾©å½¢å¼

```yaml
# .claude/commands/command-name.md

---
description: ã‚³ãƒãƒ³ãƒ‰ã®èª¬æ˜
allowed-tools: Bash(git:*), Read  # ä»»æ„: ãƒ„ãƒ¼ãƒ«åˆ¶é™
model: sonnet                     # ä»»æ„: ãƒ¢ãƒ‡ãƒ«æŒ‡å®š
argument-hint: <issue-number>     # ä»»æ„: å¼•æ•°ãƒ’ãƒ³ãƒˆ
---

ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
$ARGUMENTS ã‚’ä½¿ç”¨ã—ã¦å¼•æ•°ã‚’å—ã‘å–ã‚‹
$1, $2 ã§ä½ç½®å¼•æ•°ã«ã‚¢ã‚¯ã‚»ã‚¹
```

### 4.2 ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿

```yaml
$ARGUMENTS: å…¨å¼•æ•°ï¼ˆã‚¹ãƒšãƒ¼ã‚¹åŒºåˆ‡ã‚Šï¼‰
$1, $2, $N: ä½ç½®å¼•æ•°

ä¾‹:
  /review-pr 123 high alice
  â†’ $ARGUMENTS = "123 high alice"
  â†’ $1 = "123", $2 = "high", $3 = "alice"
```

### 4.3 ç‰¹æ®Šæ§‹æ–‡

```yaml
ãƒ•ã‚¡ã‚¤ãƒ«å‚ç…§: @path/to/file.js
ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œ: !`git status`
```

---

## 5. é€£æºãƒãƒˆãƒªã‚¯ã‚¹

### 5.1 Hook â†’ SubAgent é€£æº

```yaml
ãƒ‘ã‚¿ãƒ¼ãƒ³:
  1. Hook ã§æ¡ä»¶æ¤œå‡º â†’ SubAgent å‘¼ã³å‡ºã—æŒ‡ç¤º
  2. SubagentStop Hook ã§ã‚µãƒ–ã‚¿ã‚¹ã‚¯è©•ä¾¡

ä¾‹:
  # PreToolUse ã§ Edit æ¤œå‡º â†’ critic å‘¼ã³å‡ºã—ã‚’ additionalContext ã§æŒ‡ç¤º
  # SubagentStop ã§ critic çµæœã‚’è©•ä¾¡ â†’ ç¶™ç¶š/ãƒ–ãƒ­ãƒƒã‚¯åˆ¤å®š
```

### 5.2 Hook â†’ Skill é€£æº

```yaml
ãƒ‘ã‚¿ãƒ¼ãƒ³:
  Hook ã® stdout/additionalContext ã§ã‚¹ã‚­ãƒ«ä½¿ç”¨ã‚’ä¿ƒã™

ä¾‹:
  # PostToolUse(Write) ã§ TypeScript ãƒ•ã‚¡ã‚¤ãƒ«æ¤œå‡º
  # â†’ "lint-checker ã‚¹ã‚­ãƒ«ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„" ã‚’å‡ºåŠ›
```

### 5.3 SubAgent â†’ Skill é€£æº

```yaml
ãƒ‘ã‚¿ãƒ¼ãƒ³:
  SubAgent å®šç¾©ã« skills ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã§è‡ªå‹•ãƒ­ãƒ¼ãƒ‰

ä¾‹:
  ---
  name: code-reviewer
  skills: lint-checker, test-runner
  ---
```

---

## 6. è¨­è¨ˆãƒ‘ã‚¿ãƒ¼ãƒ³

### 6.1 ã‚¬ãƒ¼ãƒ‰ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆPreToolUseï¼‰

```bash
# æ¡ä»¶ãƒã‚§ãƒƒã‚¯ â†’ ãƒ–ãƒ­ãƒƒã‚¯ or è¨±å¯
if [[ æ¡ä»¶ ]]; then
  echo "ç†ç”±" >&2
  exit 2  # ãƒ–ãƒ­ãƒƒã‚¯
fi
exit 0  # è¨±å¯
```

### 6.2 æ¤œè¨¼ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆPostToolUseï¼‰

```bash
# çµæœæ¤œè¨¼ â†’ è¿½åŠ ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆæ³¨å…¥
result=$(æ¤œè¨¼ã‚³ãƒãƒ³ãƒ‰)
if [[ $result != "OK" ]]; then
  echo '{"hookSpecificOutput":{"additionalContext":"ä¿®æ­£ãŒå¿…è¦"}}'
fi
exit 0
```

### 6.3 ç¶™ç¶šåˆ¤å®šãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆStopï¼‰

```bash
# ã‚¿ã‚¹ã‚¯å®Œäº†åˆ¤å®š â†’ ç¶™ç¶š or åœæ­¢
if [[ æœªå®Œäº†æ¡ä»¶ ]]; then
  echo '{"decision":"block","reason":"è¿½åŠ ã‚¿ã‚¹ã‚¯ãŒã‚ã‚Šã¾ã™"}'
fi
exit 0
```

### 6.4 ç’°å¢ƒåˆæœŸåŒ–ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆSessionStartï¼‰

```bash
# ç’°å¢ƒå¤‰æ•°è¨­å®š â†’ CLAUDE_ENV_FILE ã«æ›¸ãè¾¼ã¿
if [ -n "$CLAUDE_ENV_FILE" ]; then
  echo 'export VAR=value' >> "$CLAUDE_ENV_FILE"
fi
# ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆè¿½åŠ 
echo "åˆæœŸåŒ–æƒ…å ±ã‚’ã“ã“ã«å‡ºåŠ›"
exit 0
```

---

## å¤‰æ›´å±¥æ­´

| æ—¥æ™‚ | å†…å®¹ |
|------|------|
| 2025-12-08 | åˆç‰ˆä½œæˆã€‚å…¬å¼ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹ã«åŸºã¥ãä½“ç³»åŒ–ã€‚ |
