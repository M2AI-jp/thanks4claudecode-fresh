---
description: 新しいタスクを開始。pm SubAgent を呼び出し playbook を作成する標準フロー。
allowed-tools: Read, Write, Edit, Bash, Task
---

# /task-start - タスクを開始

> **標準タスク開始コマンド。pm SubAgent を呼び出して playbook を作成する。**

---

## 設計思想

```yaml
品質の一貫性:
  - 全タスクは pm SubAgent 経由で開始
  - playbook が必ず作成される
  - 直接作業を開始することは禁止

pm 経由の強制:
  - pm SubAgent がタスク開始の必須経由点
  - 理解確認 → playbook 作成 → reviewer 検証のフロー
  - ブランチ作成も pm が実行
```

---

## フロー

```
┌─────────────────────────────────────────────────────────────┐
│ ユーザー: /task-start または「〇〇を実装して」               │
└─────────────────────────────────────────────────────────────┘
                         │
                         ▼
┌─────────────────────────────────────────────────────────────┐
│ Step 1: pm SubAgent を呼び出し                              │
│   - ユーザーの要求を pm に伝達                              │
│   - pm が理解確認（5W1H）を実施                             │
└─────────────────────────────────────────────────────────────┘
                         │
                         ▼
┌─────────────────────────────────────────────────────────────┐
│ Step 2: playbook 作成                                       │
│   - pm がテンプレートを参照して作成                         │
│   - Phase を分割し subtasks を定義                          │
└─────────────────────────────────────────────────────────────┘
                         │
                         ▼
┌─────────────────────────────────────────────────────────────┐
│ Step 3: reviewer による検証                                 │
│   - reviewer SubAgent が playbook をレビュー                │
│   - PASS → 続行 / FAIL → 修正して再レビュー                 │
└─────────────────────────────────────────────────────────────┘
                         │
                         ▼
┌─────────────────────────────────────────────────────────────┐
│ Step 4: ブランチ作成                                        │
│   - feat/{task-name} でブランチ作成                         │
│   - main からの分岐を確認                                   │
└─────────────────────────────────────────────────────────────┘
                         │
                         ▼
┌─────────────────────────────────────────────────────────────┐
│ Step 5: state.md 更新                                       │
│   - playbook.active を更新                                  │
│   - playbook.branch を更新                                  │
└─────────────────────────────────────────────────────────────┘
                         │
                         ▼
┌─────────────────────────────────────────────────────────────┐
│ Step 6: LOOP 開始                                           │
│   - Phase 1 から作業開始                                    │
│   - done_criteria に従って進行                              │
└─────────────────────────────────────────────────────────────┘
```

---

## 実行手順

### 1. pm SubAgent を呼び出す

```
Task(subagent_type="pm", prompt="
  ユーザーの要求: {要求内容}

  playbook を作成してください。
")
```

### 2. pm の処理

pm SubAgent は以下を実行:
1. 理解確認（5W1H 分析）
2. テンプレート参照
3. playbook 作成
4. reviewer 呼び出し
5. ブランチ作成
6. state.md 更新

---

## 禁止事項

```
❌ pm を経由せずに playbook を作成
❌ main ブランチでの直接作業
❌ 既存の in_progress playbook を無視して新規作成
❌ reviewer の PASS なしで playbook を確定
```

---

## 旧コマンドとの関係

```yaml
/task-start:
  役割: 標準タスク開始（pm 経由必須）
  推奨: 全ての新規タスクで使用

/playbook-init:
  役割: 旧互換（直接 playbook 作成）
  動作: 内部的に /task-start と同じフローを実行
```

---

## 変更履歴

| 日時 | 内容 |
|------|------|
| 2025-12-23 | project.md 依存を削除。pm 経由でのシンプルなフローに変更。 |
| 2025-12-09 | 初版作成。 |
