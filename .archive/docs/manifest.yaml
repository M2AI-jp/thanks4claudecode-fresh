# docs/manifest.yaml
#
# docs/ フォルダ内のファイル一元管理マニフェスト
# ファイル追加/削除時は必ずこのファイルを更新すること
#
# 最終更新: 2025-12-13
# 更新者: Claude (M016)

meta:
  version: 1.0.0
  description: "docs/ フォルダのファイル一覧とメタデータ"
  last_updated: "2025-12-13"
  file_count: 10  # 9 ドキュメント + manifest.yaml 自身

files:
  # ==================== メタ管理 ====================
  - name: manifest.yaml
    category: meta
    description: "docs/ ファイル一元管理マニフェスト（このファイル）"
    created: "2025-12-13"
    updated: "2025-12-13"
    referenced_by:
      - "docs/CLAUDE.md"
      - "docs/folder-management.md"
      - ".claude/hooks/update-tracker.sh"
    status: active
    notes: "ファイル追加/削除時は必ず更新"

  # ==================== コア仕様 ====================
  - name: CLAUDE.md
    category: core
    description: "docs/ フォルダの役割説明"
    created: "2025-12-09"
    updated: "2025-12-13"
    referenced_by:
      - ".claude/hooks/*"  # フォルダ CLAUDE.md として自動参照
    status: active

  - name: current-implementation.md
    category: core
    description: "現在実装の棚卸し（自動生成）"
    created: "2025-12-10"
    updated: "2025-12-10"
    auto_generated: true
    generator: ".claude/scripts/generate-implementation-doc.sh"
    referenced_by:
      - "CLAUDE.md"  # 復旧時に参照
    status: active
    notes: "定期的に再生成が必要"

  - name: extension-system.md
    category: core
    description: "Claude Code 公式リファレンス（Hooks/SubAgents/Skills/Commands）"
    created: "2025-12-08"
    updated: "2025-12-08"
    referenced_by:
      - "CLAUDE.md"
      - ".claude/agents/*.md"
    status: active
    source: "https://code.claude.com/docs"

  - name: feature-map.md
    category: core
    description: "Hooks/SubAgents/Skills の簡易一覧"
    created: "2025-12-09"
    updated: "2025-12-13"
    referenced_by:
      - "CLAUDE.md"  # INIT で参照
      - "state.md"
    status: active

  - name: folder-management.md
    category: core
    description: "フォルダ管理ルール（テンポラリ/永続区分）"
    created: "2025-12-13"
    updated: "2025-12-13"
    referenced_by:
      - "CLAUDE.md"
      - "state.md"
      - "plan/project.md"
    status: active

  # ==================== 運用ルール ====================
  - name: git-operations.md
    category: operation
    description: "git 操作ガイド（コミット/マージ/ブランチ）"
    created: "2025-12-09"
    updated: "2025-12-10"
    referenced_by:
      - "CLAUDE.md"  # POST_LOOP で参照
    status: active

  - name: archive-operation-rules.md
    category: operation
    description: "playbook 完了時のアーカイブ運用ルール"
    created: "2025-12-09"
    updated: "2025-12-09"
    referenced_by:
      - ".claude/hooks/archive-playbook.sh"
      - "CLAUDE.md"  # POST_LOOP で参照
    status: active

  - name: artifact-management-rules.md
    category: operation
    description: "成果物管理ルール（ファイル生成判定基準）"
    created: "2025-12-09"
    updated: "2025-12-09"
    referenced_by:
      - ".claude/agents/pm.md"
      - "plan/template/playbook-format.md"
    status: active

  - name: criterion-validation-rules.md
    category: operation
    description: "done_criteria 検証ルール（禁止パターン/Given-When-Then）"
    created: "2025-12-13"
    updated: "2025-12-13"
    referenced_by:
      - ".claude/agents/pm.md"
      - ".claude/agents/critic.md"
    status: active

# ==================== カテゴリ定義 ====================
categories:
  meta:
    description: "メタ管理ファイル（manifest 等）"
    retention: permanent

  core:
    description: "コア仕様（必要時参照）"
    retention: permanent

  operation:
    description: "運用ルール（操作時参照）"
    retention: permanent

# ==================== 管理ルール ====================
rules:
  on_add:
    - "このファイル（manifest.yaml）に追記"
    - "docs/CLAUDE.md のファイル一覧を更新"

  on_remove:
    - "このファイル（manifest.yaml）から削除"
    - "docs/CLAUDE.md のファイル一覧を更新"
    - "参照元（referenced_by）の更新を確認"

  prohibited:
    - "テスト目的のファイル配置（tmp/ を使用）"
    - "中間成果物の配置（tmp/ を使用）"
    - "manifest.yaml を更新せずにファイル追加"

# ==================== 変更履歴 ====================
changelog:
  - date: "2025-12-13"
    action: "created"
    description: "初版作成。9ファイルを登録。"
